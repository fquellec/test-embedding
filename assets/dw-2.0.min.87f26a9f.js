!function(t){"use strict";function e(e){var r={},n=e.slice(0);function i(t){for(var e=t.name(),n=e,i=1;r.hasOwnProperty(n);)n=e+"."+i++;n!==e&&t.name(n)}e.forEach((function(t){i(t),r[t.name()]=t}));var a={columns:function(){return e},column:function(n){if(t.isString(n)){if(void 0!==r[n])return r[n];throw new Error('No column found with that name: "'+n+'"')}if(!(n<0)){if(void 0!==e[n])return e[n];throw new Error("No column found with that name or index: "+n)}},numColumns:function(){return e.length},numRows:function(){return e[0].length},eachColumn:function(t){e.forEach(t)},hasColumn:function(n){return void 0!==(t.isString(n)?r[n]:e[n])},indexOf:function(t){return a.hasColumn(t)?e.indexOf(r[t]):-1},list:function(){return t.range(e[0].length).map((function(t){var r={};return e.forEach((function(e){r[e.name()]=e.val(t)})),r}))},csv:function(){var r="";return e.forEach((function(t,e){var n=t.title();n.indexOf('"')>-1&&n.replace('"','\\"'),n.indexOf(",")>-1&&(n='"'+n+'"'),r+=(e>0?",":"")+n})),t.range(a.numRows()).forEach((function(t){r+="\n",e.forEach((function(e,n){var i=""+("date"===e.type()?e.raw(t):e.val(t));i.indexOf('"')>-1&&i.replace('"','\\"'),i.indexOf(",")>-1&&(i='"'+i+'"'),r+=(n>0?",":"")+i}))})),r},toCSV:function(){return this.csv()},filterColumns:function(n){return e=e.filter((function(t){return!n[t.name()]})),t.each(n,(function(t,e){t&&r[e]&&delete r[e]})),a},eachRow:function(t){var e;for(e=0;e<a.numRows();e++)t(e);return a},add:function(t){return i(t),e.push(t),r[t.name()]=t,n.push(t),a},limitRows:function(t){return e.forEach((function(e){e.limitRows(t)})),a},limitColumns:function(t){return e.length>t&&(e.length=t,n.length=t),a},columnOrder:function(t){return arguments.length?(e.length=0,t.forEach((function(t){e.push(n[t])})),a):e.map((function(t){return n.indexOf(t)}))}};return a}function r(t,e){return Math.abs(t-e)<1e-6}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var n=/^ */.source,i=/[*']* *$/.source,a=/[ \-/.]?/.source,o=/[ \-/.]/.source,s=/[ \-/.;,]/.source,u=/[ \-|T]/.source,c=/[ \-/.m]/.source,p={YY:{parse:/['’‘]?(\d{2})/},YYYY:{test:/([12]\d{3})/,parse:/(\d{4})/},YYYY2:{test:/(?:1[7-9]|20)\d{2}/,parse:/(\d{4})/},H:{parse:/h([12])/},Q:{parse:/q([1234])/},W:{parse:/w([0-5]?[0-9])/},MM:{test:/(0?[1-9]|1[0-2])/,parse:/(0?[1-9]|1[0-2])/},DD:{parse:/(0?[1-9]|[1-2][0-9]|3[01])/},DOW:{parse:/([0-7])/},HHMM:{parse:/(0?\d|1\d|2[0-3]):([0-5]\d)(?::([0-5]\d))? *(am|pm)?/}},h={0:["jan","january","januar","jänner","jän","janv","janvier","ene","enero","gen","gennaio","janeiro"],1:["feb","february","febr","februar","fév","févr","février","febrero","febbraio","fev","fevereiro"],2:["mar","mär","march","mrz","märz","mars","mars","marzo","marzo","março"],3:["apr","april","apr","april","avr","avril","abr","abril","aprile"],4:["may","mai","mayo","mag","maggio","maio","maj"],5:["jun","june","juni","juin","junio","giu","giugno","junho"],6:["jul","july","juli","juil","juillet","julio","lug","luglio","julho"],7:["aug","august","août","ago","agosto"],8:["sep","september","sept","septembre","septiembre","set","settembre","setembro"],9:["oct","october","okt","oktober","octobre","octubre","ott","ottobre","out","outubro"],10:["nov","november","november","novembre","noviembre","novembre","novembro"],11:["dec","december","dez","des","dezember","déc","décembre","dic","diciembre","dicembre","desember","dezembro"]},f={};t.each(h,(function(e,r){t.each(e,(function(t){f[t]=r}))})),p.MMM={parse:new RegExp("("+t.flatten(t.values(h)).join("|")+")")},t.each(p,(function(e){e.parse=e.parse.source,t.isRegExp(e.test)?e.test=e.test.source:e.test=e.parse}));var l={YYYY:{test:d(p.YYYY2.test),parse:d(p.YYYY2.parse),precision:"year"},"YYYY-H":{test:d(p.YYYY.test,a,p.H.test),parse:d(p.YYYY.parse,a,p.H.parse),precision:"half"},"H-YYYY":{test:d(p.H.test,o,p.YYYY.test),parse:d(p.H.parse,o,p.YYYY.parse),precision:"half"},"YYYY-Q":{test:d(p.YYYY.test,a,p.Q.test),parse:d(p.YYYY.parse,a,p.Q.parse),precision:"quarter"},"Q-YYYY":{test:d(p.Q.test,o,p.YYYY.test),parse:d(p.Q.parse,o,p.YYYY.parse),precision:"quarter"},"YYYY-M":{test:d(p.YYYY.test,c,p.MM.test),parse:d(p.YYYY.parse,c,p.MM.parse),precision:"month"},"M-YYYY":{test:d(p.MM.test,o,p.YYYY.test),parse:d(p.MM.parse,o,p.YYYY.parse),precision:"month"},"YYYY-MMM":{test:d(p.YYYY.test,o,p.MMM.parse),parse:d(p.YYYY.parse,o,p.MMM.parse),precision:"month"},"MMM-YYYY":{test:d(p.MMM.parse,o,p.YYYY.test),parse:d(p.MMM.parse,o,p.YYYY.parse),precision:"month"},"MMM-YY":{test:d(p.MMM.parse,o,p.YY.test),parse:d(p.MMM.parse,o,p.YY.parse),precision:"month"},MMM:{test:d(p.MMM.parse),parse:d(p.MMM.parse),precision:"month"},"YYYY-WW":{test:d(p.YYYY.test,a,p.W.test),parse:d(p.YYYY.parse,a,p.W.parse),precision:"week"},"WW-YYYY":{test:d(p.W.test,o,p.YYYY.test),parse:d(p.W.parse,o,p.YYYY.parse),precision:"week"},"MM/DD/YYYY":{test:d(p.MM.test,"([\\-\\/])",p.DD.test,"\\2",p.YYYY.test),parse:d(p.MM.parse,"([\\-\\/])",p.DD.parse,"\\2",p.YYYY.parse),precision:"day"},"MM/DD/YY":{test:d(p.MM.test,"([\\-\\/])",p.DD.test,"\\2",p.YY.test),parse:d(p.MM.parse,"([\\-\\/])",p.DD.parse,"\\2",p.YY.parse),precision:"day"},"DD/MM/YY":{test:d(p.DD.test,"([\\-\\.\\/ ?])",p.MM.test,"\\2",p.YY.test),parse:d(p.DD.parse,"([\\-\\.\\/ ?])",p.MM.parse,"\\2",p.YY.parse),precision:"day"},"DD/MM/YYYY":{test:d(p.DD.test,"([\\-\\.\\/ ?])",p.MM.test,"\\2",p.YYYY.test),parse:d(p.DD.parse,"([\\-\\.\\/ ?])",p.MM.parse,"\\2",p.YYYY.parse),precision:"day"},"DD/MMM/YYYY":{test:d(p.DD.test,"([\\-\\.\\/ ?])",p.MMM.test,"\\2",p.YYYY.test),parse:d(p.DD.parse,"([\\-\\.\\/ ?])",p.MMM.parse,"\\2",p.YYYY.parse),precision:"day"},"DD/MMM/YY":{test:d(p.DD.test,"([\\-\\.\\/ ?])",p.MMM.test,"\\2",p.YY.test),parse:d(p.DD.parse,"([\\-\\.\\/ ?])",p.MMM.parse,"\\2",p.YY.parse),precision:"day"},"YYYY-MM-DD":{test:d(p.YYYY.test,"([\\-\\.\\/ ?])",p.MM.test,"\\2",p.DD.test),parse:d(p.YYYY.parse,"([\\-\\.\\/ ?])",p.MM.parse,"\\2",p.DD.parse),precision:"day"},"MMM-DD-YYYY":{test:d(p.MMM.test,o,p.DD.test,s,p.YYYY.test),parse:d(p.MMM.parse,o,p.DD.parse,s,p.YYYY.parse),precision:"day"},"YYYY-WW-d":{test:d(p.YYYY.test,a,p.W.test,o,p.DOW.test),parse:d(p.YYYY.parse,a,p.W.parse,o,p.DOW.parse),precision:"day"},"MM/DD/YYYY HH:MM":{test:d(p.MM.test,"([\\-\\/])",p.DD.test,"\\2",p.YYYY.test,u,p.HHMM.test),parse:d(p.MM.parse,"([\\-\\/])",p.DD.parse,"\\2",p.YYYY.parse,u,p.HHMM.parse),precision:"day-minutes"},"DD.MM.YYYY HH:MM":{test:d(p.DD.test,"([\\-\\.\\/ ?])",p.MM.test,"\\2",p.YYYY.test,u,p.HHMM.test),parse:d(p.DD.parse,"([\\-\\.\\/ ?])",p.MM.parse,"\\2",p.YYYY.parse,u,p.HHMM.parse),precision:"day-minutes"},"YYYY-MM-DD HH:MM":{test:d(p.YYYY.test,"([\\-\\.\\/ ?])",p.MM.test,"\\2",p.DD.test,u,p.HHMM.test),parse:d(p.YYYY.parse,"([\\-\\.\\/ ?])",p.MM.parse,"\\2",p.DD.parse,u,p.HHMM.parse),precision:"day-minutes"},ISO8601:{test:/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d(\.\d+)?([+-][0-2]\d:[0-5]\d|Z)/,parse:function(t){return t},precision:"day-seconds"}};function d(){return new RegExp(n+Array.prototype.slice.call(arguments).join(" *")+i,"i")}function m(e,r){var n=l[r];return t.isRegExp(n.test)?n.test.test(e):n.test(e,r)}function v(t,e,r){var n=new Date(Date.UTC(t,0,3));return n.setUTCDate(3-n.getUTCDay()+7*(e-1)+parseInt(r,10)),n}function g(t,e){return 12!==t?t+("pm"===e?12:0):"am"===e?0:12}var y={text:function(){return{parse:t.identity,errors:function(){return 0},name:function(){return"text"},formatter:function(){return t.identity},isValid:function(){return!0},format:function(){}}},number:function(e){var n,i=0,a={"-.":/^ *[-–—−]?[0-9]*(\.[0-9]+)?(e[+-][0-9]+)?%? *$/,"-,":/^ *[-–—−]?[0-9]*(,[0-9]+)?%? *$/,",.":/^ *[-–—−]?[0-9]{1,3}(,[0-9]{3})*(\.[0-9]+)?%? *$/,".,":/^ *[-–—−]?[0-9]{1,3}(\.[0-9]{3})*(,[0-9]+)?%? *$/," .":/^ *[-–—−]?[0-9]{1,3}([   ][0-9]{3})*(\.[0-9]+)?%? *$/," ,":/^ *[-–—−]?[0-9]{1,3}([   ][0-9]{3})*(,[0-9]+)?%? *$/,"'.":/^ *[-–—−]?[0-9]{1,3}('[0-9]{3})*(\.[0-9]+)?%? *$/},o={"-.":"1234.56","-,":"1234,56",",.":"1,234.56",".,":"1.234,56"," .":"1 234.56"," ,":"1 234,56"," .":"1 234.56"," ,":"1 234,56"," .":"1 234.56"," ,":"1 234,56"},s={na:1,"n/a":1,"-":1,":":1},u={},c=["-.",0];e=e||[],t.each(e,(function(e){t.each(a,(function(t,r){void 0===u[r]&&(u[r]=0),t.test(e)&&(u[r]+=1,u[r]>c[1]&&(c[0]=r,c[1]=u[r]))}))})),n=c[0];var p={parse:function(e){if(t.isNumber(e)||t.isUndefined(e)||t.isNull(e))return e;var r=e.replace("%","").replace("−","-").replace(/[   ]/g,"").replace("–","-").replace("—","-");return"-"!==n[0]&&(r=r.replace(new RegExp("."===n[0]?"\\.":n[0],"g"),"")),"."!==n[1]&&(r=r.replace(n[1],".")),isNaN(r)||""===r?(s[r.toLowerCase()]||""===r||i++,e):Number(r)},toNum:function(t){return t},fromNum:function(t){return t},errors:function(){return i},name:function(){return"number"},formatter:function(t){var e=t["number-format"]||"-",n=Number(t["number-divisor"]||0),i=(t["number-append"]||"").replace(/ /g," "),a=(t["number-prepend"]||"").replace(/ /g," ");return function(t,o,s){if(isNaN(t))return t;var u=e;if(0!==n&&"-"===u&&(u="n1"),0!==n&&(t=Number(t)/Math.pow(10,n)),"s"===u.substr(0,1)){var c=+u.substr(1);u="n"+Math.max(0,function(t,e){return 0===t?0:Math.round(e-Math.ceil(Math.log(Math.abs(t))/Math.LN10))}(t,c))}return s&&(u="n0"),"-"===u&&(u=r(t,Math.round(t))?"n0":r(t,.1*Math.round(10*t))?"n1":r(t,.01*Math.round(100*t))?"n2":r(t,.001*Math.round(1e3*t))?"n3":r(t,1e-4*Math.round(1e4*t))?"n4":r(t,1e-5*Math.round(1e5*t))?"n5":"n6"),t=Globalize.format(t,"-"!==u?u:null),o?a+t+i:t}},isValid:function(e){return""===e||s[String(e).toLowerCase()]||t.isNumber(p.parse(e))},ambiguousFormats:function(){var e=[];return t.each(u,(function(t,r){t===c[1]&&e.push([r,o[r]])})),e},format:function(t){return arguments.length?(n=t,p):n}};return p},date:function(e){var r,n=0,i={},a=["",0];e=e||[],t.each(l,(function(r,n){t.each(e,(function(t){void 0===i[n]&&(i[n]=0),m(t,n)&&(i[n]+=1,i[n]>a[1]&&(a[0]=n,a[1]=i[n]))}))})),r=a[0];var o={parse:function(e){if(t.isDate(e)||t.isUndefined(e))return e;if(!r||!t.isString(e))return n++,e;var i,a,o,s=(i=e.toLowerCase(),o=l[a=r],t.isRegExp(o.parse)?i.match(o.parse):o.parse(i,a));if(!s)return n++,e;function u(t){return(t=+t)<30?2e3+t:1900+t}m(e,r)||n++;var c=(new Date).getFullYear();switch(r){case"YYYY":return new Date(s[1],0,1);case"YYYY-H":return new Date(s[1],6*(s[2]-1),1);case"H-YYYY":return new Date(s[2],6*(s[1]-1),1);case"YYYY-Q":return new Date(s[1],3*(s[2]-1),1);case"Q-YYYY":return new Date(s[2],3*(s[1]-1),1);case"YYYY-M":return new Date(s[1],s[2]-1,1);case"M-YYYY":return new Date(s[2],s[1]-1,1);case"YYYY-MMM":return new Date(+s[1],f[s[2]],1);case"MMM-YYYY":return new Date(+s[2],f[s[1]],1);case"MMM-YY":return new Date(u(+s[2]),f[s[1]],1);case"MMM":return new Date(c,f[s[1]],1);case"YYYY-WW":return v(s[1],s[2],1);case"WW-YYYY":return v(s[2],s[1],1);case"YYYY-WW-d":return v(s[1],s[2],s[3]);case"YYYY-MM-DD":return new Date(s[1],s[3]-1,s[4]);case"DD/MM/YYYY":return new Date(s[4],s[3]-1,s[1]);case"DD/MMM/YYYY":return new Date(s[4],f[s[3]],s[1]);case"DD/MMM/YY":return new Date(u(s[4]),f[s[3]],s[1]);case"MM/DD/YYYY":return new Date(s[4],s[1]-1,s[3]);case"MM/DD/YY":return new Date(u(s[4]),s[1]-1,s[3]);case"DD/MM/YY":return new Date(u(s[4]),s[3]-1,s[1]);case"MMM-DD-YYYY":return new Date(s[3],f[s[1]],s[2]);case"YYYY-MM-DD HH:MM":return new Date(+s[1],s[3]-1,+s[4],g(+s[5],s[8]),+s[6]||0,+s[7]||0);case"DD.MM.YYYY HH:MM":return new Date(+s[4],s[3]-1,+s[1],g(+s[5],s[8]),+s[6]||0,+s[7]||0);case"MM/DD/YYYY HH:MM":return new Date(+s[4],s[1]-1,+s[3],g(+s[5],s[8]),+s[6]||0,+s[7]||0);case"ISO8601":return new Date(s.toUpperCase());default:console.warn("unknown format",r)}return n++,e},toNum:function(e){return t.isDate(e)?e.getTime():Number.NaN},fromNum:function(t){return new Date(t)},errors:function(){return n},name:function(){return"date"},format:function(t){return arguments.length?(r=t,o):r},precision:function(){return l[r].precision},formatter:function(){if(!r)return t.identity;var e=Globalize.culture().calendar.patterns.M.replace("MMMM","MMM");switch(l[r].precision){case"year":return function(e){return t.isDate(e)?e.getFullYear():e};case"half":return function(e){return t.isDate(e)?e.getFullYear()+" H"+(e.getMonth()/6+1):e};case"quarter":return function(e){return t.isDate(e)?e.getFullYear()+" Q"+(e.getMonth()/3+1):e};case"month":return function(e){return t.isDate(e)?Globalize.format(e,"MMM yy"):e};case"week":return function(e){return t.isDate(e)?function(t){var e=t.getUTCDay(),r=new Date(t.valueOf());r.setDate(r.getDate()-(e+6)%7+3);var n=r.getUTCFullYear(),i=Math.floor((r.getTime()-new Date(n,0,1,-6))/864e5);return[n,1+Math.floor(i/7),e>0?e:7]}(e).slice(0,2).join(" W"):e};case"day":return function(e,r){return t.isDate(e)?Globalize.format(e,r?"D":"d"):e};case"day-minutes":return function(r){return t.isDate(r)?Globalize.format(r,e).replace(" ","&nbsp;")+" - "+Globalize.format(r,"t").replace(" ","&nbsp;"):r};case"day-seconds":return function(e){return t.isDate(e)?Globalize.format(e,"T").replace(" ","&nbsp;"):e}}},isValid:function(e){return t.isDate(o.parse(e))},ambiguousFormats:function(){var e=[];return t.each(i,(function(t,r){t===a[1]&&e.push([r,r])})),e}};return o}},M=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,Y=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,w="<a><span><b><br><br/><i><strong><sup><sub><strike><u><em><tt>";function b(t,e){if(null===t)return null;if(void 0!==t){if((t=String(t)).indexOf("<")<0||t.indexOf(">")<0)return t;if(t=function(t,e){e=(((void 0!==e?e||"":w)+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var r=t,n=t;for(;;)if(n=(r=n).replace(Y,"").replace(M,(function(t,r){return e.indexOf("<"+r.toLowerCase()+">")>-1?t:""})),r===n)return n}(t,e),"undefined"==typeof document)return t;var r=document.createElement("div");r.innerHTML=t;for(var n=r.querySelectorAll("*"),i=0;i<n.length;i++){"a"===n[i].nodeName.toLowerCase()&&("_self"!==n[i].getAttribute("target")&&n[i].setAttribute("target","_blank"),n[i].setAttribute("rel","nofollow noopener noreferrer"),n[i].getAttribute("href")&&n[i].getAttribute("href").trim().replace(/[^a-zA-Z0-9 -:]/g,"").startsWith("javascript:")&&n[i].setAttribute("href",""));for(var a=[],o=0;o<n[i].attributes.length;o++){var s=n[i].attributes[o];s.specified&&"on"===s.name.substr(0,2)&&a.push(s.name)}a.forEach((function(t){return n[i].removeAttribute(t)}))}return r.innerHTML}}function E(e,r,n){function i(t){return null!=t&&""!==t}var a,o,s,u,c=t.shuffle(t.range(r.length)).filter((function(t){return i(r[t])})).slice(0,200).map((function(t){return r[t]}));n=n?y[n](c):function(e){if(t.every(r,t.isNumber))return y.number();if(t.every(r,t.isDate))return y.date();var n,a=[y.date(e),y.number(e),y.text()],o=.1*r.filter(i).length;return t.each(r,(function(e){t.each(a,(function(t){t.parse(e)}))})),t.every(a,(function(t){return t.errors()<o&&(n=t),!n})),t.isUndefined(n)&&(n=a[2]),n}(c);var p,h=r.slice(0),f={name:function(){return arguments.length?(e=arguments[0],f):b(e)},title:function(){return arguments.length?(p=arguments[0],f):b(p||e)},length:r.length,val:function(e,i){if(arguments.length){var a=i?h:r;return e<0&&(e+=a.length),n.parse(t.isDate(a[e])||t.isNumber(a[e])?a[e]:b(a[e]))}},values:function(e){var i=e?h:r;return i=t.map(i,(function(e){return t.isDate(e)||t.isNumber(e)?e:b(e)})),t.map(i,n.parse)},each:function(t){for(var e=0;e<r.length;e++)t(f.val(e),e)},raw:function(e,n){return arguments.length?2===arguments.length?(r[e]=n,f):t.isDate(r[e])||t.isNumber(r[e])?r[e]:b(r[e]):r.map((function(e){return t.isDate(e)||t.isNumber(e)?e:b(e)}))},type:function(e){if(!0===e)return n;if(t.isString(e)){if(y[e])return n=y[e](c),f;throw new Error("unknown column type: "+e)}return n.name()},range:function(){return!!n.toNum&&(a||(a=[Number.MAX_VALUE,-Number.MAX_VALUE],f.each((function(e){e=n.toNum(e),t.isNumber(e)&&!t.isNaN(e)&&(e<a[0]&&(a[0]=e),e>a[1]&&(a[1]=e))})),a[0]=n.fromNum(a[0]),a[1]=n.fromNum(a[1])),a)},sum:function(){return!!n.toNum&&(void 0===o&&(o=0,f.each((function(t){var e=n.toNum(t);Number.isFinite(e)&&(o+=e)})),o=n.fromNum(o)),o)},mean:function(){if(!n.toNum)return!1;if(void 0===s){s=0;var t=0;f.each((function(e){var r=n.toNum(e);Number.isFinite(r)&&(s+=r,t++)})),s=n.fromNum(s/t)}return s},median:function(){if(!n.toNum)return!1;if(void 0===u){var t=f.values().map(n.toNum);u=n.fromNum(function(t){var e,r=[],n=t.length,i=-1;if(1===arguments.length)for(;++i<n;)x(e=O(t[i]))&&r.push(e);if(r.length)return A(r.sort(N),.5)}(t))}return u},filterRows:function(e){return r=[],arguments.length?t.each(e,(function(t){r.push(h[t])})):r=h.slice(0),f.length=r.length,a=o=s=u=void 0,f},toString:function(){return e+" ("+n.name()+")"},indexOf:function(e){return t.find(t.range(r.length),(function(t){return f.val(t)===e}))},limitRows:function(t){h.length>t&&(h.length=t,r.length=t,f.length=t)}};return f.total=f.sum,f}function A(t,e){var r=(t.length-1)*e+1,n=Math.floor(r),i=+t[n-1],a=r-n;return a?i+a*(t[n]-i):i}function O(t){return null===t?NaN:+t}function x(t){return!isNaN(t)}function N(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function C(t,e,r){return(C=S()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&T(i,r.prototype),i}).apply(null,arguments)}function R(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function k(t){return{dataset:function(){if(t.url){var e=(new Date).getTime(),r="".concat(t.url).concat(t.url.indexOf("?")>-1?"&":"?","v=").concat(t.url.indexOf("//static.dwcdn.net")>-1?e-e%6e4:e);return window.fetch(r).then((function(t){return t.text()})).then((function(e){return new L(t).parse(e)}))}if(t.csv||""===t.csv)return new Promise((function(e){e(t.csv)})).then((function(e){return new L(t).parse(e)}));throw new Error("you need to provide either an URL or CSV data.")},parse:function(){return new L(t).parse(t.csv)}}}e.delimited=k;var L=function(){function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),t=Object.assign({delimiter:"auto",quoteChar:'"',skipRows:0,emptyValue:null,transpose:!1,firstRowIsHeader:!0},t),this.__delimiterPatterns=F(t.delimiter,t.quoteChar),this.opts=t}var n,i,a;return n=r,(i=[{key:"parse",value:function(r){this.__rawData=r;var n=this.opts;"auto"===n.delimiter&&(n.delimiter=this.guessDelimiter(r,n.skipRows),this.__delimiterPatterns=F(n.delimiter,n.quoteChar));var i,a="|"!==n.delimiter?"|":"#";return r=a+"\n"+r.replace(/[ \r\n\f]+$/g,"").replace(/^\uFEFF/,"")+a,i=function(t,e,r){r=r||",";for(var n,i=[[]],o=null;o=t.exec(e);){var s=o[1];s.length&&s!==r&&i.push([]),n=o[2]?o[2].replace(new RegExp('""',"g"),'"'):o[3],i[i.length-1].push(void 0===n?"":n)}i[0][0].substr(0,1)===a&&(i[0][0]=i[0][0].substr(1));var u=i.length-1,c=i[u].length-1,p=i[u][c].length-1;return i[u][c].substr(p)===a&&(i[u][c]=i[u][c].substr(0,p)),i.slice(1)}(this.__delimiterPatterns,r,n.delimiter),n.transpose&&(i=function(t){var e,r,n=t,i=n.length?n.length:0,a=n[0]instanceof Array?n[0].length:0;if(0===a||0===i)return[];var o=[];for(e=0;e<a;e++)for(o[e]=[],r=0;r<i;r++)o[e][r]=n[r][e];return o}(i)),function(r){var i=[],a={},o=r.length,s=r[0].length,u=n.skipRows,c=[];n.firstRowIsHeader&&(c=r[u],u++);for(var p=0;p<s;p++){var h=t.isString(c[p])?c[p].replace(/^\s+|\s+$/g,""):"",f=""!==h?"":1;for(h=""!==h?h:"X.";void 0!==a[h+f];)f=""===f?1:f+1;i.push({name:h+f,data:[]}),a[h+f]=!0}return t.range(u,o).forEach((function(t){i.forEach((function(e,i){e.data.push(""!==r[t][i]?r[t][i]:n.emptyValue)}))})),e(i=i.map((function(t){return E(t.name,t.data)})))}(i)}},{key:"guessDelimiter",value:function(t){var e=0,r=-1,n=this,i=["\t",";","|",","];return i.forEach((function(i,a){var o=F(i,n.quoteChar),s=t.match(o).length;"\t"===i&&(s*=1.15),s>e&&(e=s,r=a)})),i[r]}}])&&D(n.prototype,i),a&&D(n,a),r}();function F(t,e){return new RegExp("(\\"+t+"|\\r?\\n|\\r|^)(?:"+e+"([^"+e+"]*(?:"+e+'"[^'+e+"]*)*)"+e+"|([^"+e+"\\"+t+"\\r\\n]*))","gi")}function P(t){return{dataset:function(){if(t.url)return fetch(t.url).then((function(t){return t.text()})).then((function(t){return JSON.parse(t)}));if(t.csv)return new Promise((function(e){e(t.csv)})).then((function(t){return JSON.parse(t)}));throw new Error("you need to provide either an URL or CSV data.")},parse:function(){return JSON.parse(t.csv)}}}function j(t){return Math.max(0,String(t-Math.floor(t)).replace(/00000*[0-9]+$/,"").replace(/33333*[0-9]+$/,"").replace(/99999*[0-9]+$/,"").length-2)}function U(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Math.pow(10,e);return Math.round(t*r)/r}e.json=P;var H="object"==typeof global&&global&&global.Object===Object&&global,z="object"==typeof self&&self&&self.Object===Object&&self,G=H||z||Function("return this")(),W=G.Symbol,V=Object.prototype,B=V.hasOwnProperty,$=V.toString,q=W?W.toStringTag:void 0;var X=Object.prototype.toString;var K=W?W.toStringTag:void 0;function Q(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":K&&K in Object(t)?function(t){var e=B.call(t,q),r=t[q];try{t[q]=void 0;var n=!0}catch(t){}var i=$.call(t);return n&&(e?t[q]=r:delete t[q]),i}(t):function(t){return X.call(t)}(t)}function J(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var Z,tt=G["__core-js_shared__"],et=(Z=/[^.]+$/.exec(tt&&tt.keys&&tt.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"";var rt=Function.prototype.toString;var nt=/^\[object .+?Constructor\]$/,it=Function.prototype,at=Object.prototype,ot=it.toString,st=at.hasOwnProperty,ut=RegExp("^"+ot.call(st).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ct(t){return!(!J(t)||(e=t,et&&et in e))&&(function(t){if(!J(t))return!1;var e=Q(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}(t)?ut:nt).test(function(t){if(null!=t){try{return rt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function pt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return ct(r)?r:void 0}var ht=pt(Object,"create");var ft=Object.prototype.hasOwnProperty;var lt=Object.prototype.hasOwnProperty;function dt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function mt(t,e){for(var r,n,i=t.length;i--;)if((r=t[i][0])===(n=e)||r!=r&&n!=n)return i;return-1}dt.prototype.clear=function(){this.__data__=ht?ht(null):{},this.size=0},dt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},dt.prototype.get=function(t){var e=this.__data__;if(ht){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return ft.call(e,t)?e[t]:void 0},dt.prototype.has=function(t){var e=this.__data__;return ht?void 0!==e[t]:lt.call(e,t)},dt.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ht&&void 0===e?"__lodash_hash_undefined__":e,this};var vt=Array.prototype.splice;function gt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}gt.prototype.clear=function(){this.__data__=[],this.size=0},gt.prototype.delete=function(t){var e=this.__data__,r=mt(e,t);return!(r<0)&&(r==e.length-1?e.pop():vt.call(e,r,1),--this.size,!0)},gt.prototype.get=function(t){var e=this.__data__,r=mt(e,t);return r<0?void 0:e[r][1]},gt.prototype.has=function(t){return mt(this.__data__,t)>-1},gt.prototype.set=function(t,e){var r=this.__data__,n=mt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var yt=pt(G,"Map");function Mt(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Yt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Yt.prototype.clear=function(){this.size=0,this.__data__={hash:new dt,map:new(yt||gt),string:new dt}},Yt.prototype.delete=function(t){var e=Mt(this,t).delete(t);return this.size-=e?1:0,e},Yt.prototype.get=function(t){return Mt(this,t).get(t)},Yt.prototype.has=function(t){return Mt(this,t).has(t)},Yt.prototype.set=function(t,e){var r=Mt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function wt(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Yt;++e<r;)this.add(t[e])}function bt(t){return t!=t}function Et(t,e){return!!(null==t?0:t.length)&&function(t,e,r){return e==e?function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}(t,e,r):function(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}(t,bt,r)}(t,e,0)>-1}function At(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}function Ot(t,e){return t.has(e)}wt.prototype.add=wt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},wt.prototype.has=function(t){return this.__data__.has(t)};var xt=pt(G,"Set");function Nt(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var _t=xt&&1/Nt(new xt([,-0]))[1]==1/0?function(t){return new xt(t)}:function(){};function Dt(t){return t&&t.length?function(t,e,r){var n=-1,i=Et,a=t.length,o=!0,s=[],u=s;if(r)o=!1,i=At;else if(a>=200){var c=e?null:_t(t);if(c)return Nt(c);o=!1,i=Ot,u=new wt}else u=e?[]:s;t:for(;++n<a;){var p=t[n],h=e?e(p):p;if(p=r||0!==p?p:0,o&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),s.push(p)}else i(u,h,r)||(u!==s&&u.push(h),s.push(p))}return s}(t):[]}var Tt=G.isFinite;function St(t){return"number"==typeof t&&Tt(t)}function Ct(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,i=[],a=0,o=Dt(t.filter(St)),s=o.length,u=Math.floor(s*(1-n));if(o.length<3)return Math.round(o.reduce((function(t,e){if(!e)return t;var r=Math.log(Math.abs(e))/Math.LN10;return r<8&&r>-3?t+Math.min(3,j(o[0])):t+(r>0?-1*(r-1):-1*r)}),0)/o.length);Dt(o.map(p)).length>u?(e=function(){return Dt(i).length===s},r=-1):(e=function(){return Dt(i).length<=u},r=1);var c=100;do{i=o.map(p),a+=r}while(e()&&c-- >0);function p(t){return U(t,a)}return c<10&&console.warn("maximum iteration reached",t,i,a),r<0?a+=2:a--,a}function Rt(t){if(!t||"object"!==_(t))return t;try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}function It(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return null;var r=t.offsetHeight;if(!e)return r;var n=getComputedStyle(t);return r+=parseInt(n.marginTop)+parseInt(n.marginBottom)}function kt(){for(var t=0,e=document.querySelector(".dw-chart"),r=0;r<e.children.length;r++){var n=e.children[r],i=n.tagName.toLowerCase();"script"===i||"style"===i||"chart"===n.id||n.getAttribute("aria-hidden")||a(n,"tooltip")||a(n,"vg-tooltip")||a(n,"hidden")||a(n,"qtip")||a(n,"container")||a(n,"noscript")||a(n,"hidden")||a(n,"filter-ui")||a(n,"dw-after-body")||a(n,"dw-chart-body")||(t+=Number(It(n,!0)))}function a(t,e){return t.classList.contains(e)}var o=["padding-top","padding-bottom","margin-top","margin-bottom","border-top-width","border-bottom-width"];return[".dw-chart",".dw-chart-body"].forEach((function(e){o.forEach((function(r){var n,i;t+=Number((n=e,i=r,getComputedStyle(document.querySelector(n))[i].replace("px","")))}))})),t}var Lt="TOP",Ft="TPAREN";function Pt(t,e,r){this.type=t,this.value=e,this.index=r}function jt(t,e){this.pos=0,this.current=null,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.consts=t.consts,this.expression=e,this.savedPosition=0,this.savedCurrent=null,this.options=t.options,this.parser=t}Pt.prototype.toString=function(){return this.type+": "+this.value},jt.prototype.newToken=function(t,e,r){return new Pt(t,e,null!=r?r:this.pos)},jt.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},jt.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},jt.prototype.next=function(){return this.pos>=this.expression.length?this.newToken("TEOF","EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},jt.prototype.isString=function(){var t=!1,e=this.pos,r=this.expression.charAt(e);if("'"===r||'"'===r)for(var n=this.expression.indexOf(r,e+1);n>=0&&this.pos<this.expression.length;){if(this.pos=n+1,"\\"!==this.expression.charAt(n-1)){var i=this.expression.substring(e+1,n);this.current=this.newToken("TSTRING",this.unescape(i),e),t=!0;break}n=this.expression.indexOf(r,n+1)}return t},jt.prototype.isParen=function(){var t=this.expression.charAt(this.pos);return("("===t||")"===t)&&(this.current=this.newToken(Ft,t),this.pos++,!0)},jt.prototype.isBracket=function(){var t=this.expression.charAt(this.pos);return!("["!==t&&"]"!==t||!this.isOperatorEnabled("["))&&(this.current=this.newToken("TBRACKET",t),this.pos++,!0)},jt.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken("TCOMMA",","),this.pos++,!0)},jt.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken("TSEMICOLON",";"),this.pos++,!0)},jt.prototype.isConst=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()&&(e===this.pos||"_"!==r&&"."!==r&&(r<"0"||r>"9")))break}if(e>t){var n=this.expression.substring(t,e);if(n in this.consts)return this.current=this.newToken("TNUMBER",this.consts[n]),this.pos+=n.length,!0}return!1},jt.prototype.isNamedOp=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()&&(e===this.pos||"_"!==r&&(r<"0"||r>"9")))break}if(e>t){var n=this.expression.substring(t,e);if(this.isOperatorEnabled(n)&&(n in this.binaryOps||n in this.unaryOps||n in this.ternaryOps))return this.current=this.newToken(Lt,n),this.pos+=n.length,!0}return!1},jt.prototype.isName=function(){for(var t=this.pos,e=t,r=!1;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()){if(e===this.pos&&("$"===n||"_"===n)){"_"===n&&(r=!0);continue}if(e===this.pos||!r||"_"!==n&&(n<"0"||n>"9"))break}else r=!0}if(r){var i=this.expression.substring(t,e);return this.current=this.newToken("TNAME",i),this.pos+=i.length,!0}return!1},jt.prototype.isWhitespace=function(){for(var t=!1,e=this.expression.charAt(this.pos);!(" "!==e&&"\t"!==e&&"\n"!==e&&"\r"!==e||(t=!0,this.pos++,this.pos>=this.expression.length));)e=this.expression.charAt(this.pos);return t};var Ut=/^[0-9a-f]{4}$/i;jt.prototype.unescape=function(t){var e=t.indexOf("\\");if(e<0)return t;for(var r=t.substring(0,e);e>=0;){var n=t.charAt(++e);switch(n){case"'":r+="'";break;case'"':r+='"';break;case"\\":r+="\\";break;case"/":r+="/";break;case"b":r+="\b";break;case"f":r+="\f";break;case"n":r+="\n";break;case"r":r+="\r";break;case"t":r+="\t";break;case"u":var i=t.substring(e+1,e+5);Ut.test(i)||this.parseError("Illegal escape sequence: \\u"+i),r+=String.fromCharCode(parseInt(i,16)),e+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+n+'"')}++e;var a=t.indexOf("\\",e);r+=t.substring(e,a<0?t.length:a),e=a}return r},jt.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},jt.prototype.isRadixInteger=function(){var t,e,r=this.pos;if(r>=this.expression.length-2||"0"!==this.expression.charAt(r))return!1;if(++r,"x"===this.expression.charAt(r))t=16,e=/^[0-9a-f]$/i,++r;else{if("b"!==this.expression.charAt(r))return!1;t=2,e=/^[01]$/i,++r}for(var n=!1,i=r;r<this.expression.length;){var a=this.expression.charAt(r);if(!e.test(a))break;r++,n=!0}return n&&(this.current=this.newToken("TNUMBER",parseInt(this.expression.substring(i,r),t)),this.pos=r),n},jt.prototype.isNumber=function(){for(var t,e=!1,r=this.pos,n=r,i=r,a=!1,o=!1;r<this.expression.length&&((t=this.expression.charAt(r))>="0"&&t<="9"||!a&&"."===t);)"."===t?a=!0:o=!0,r++,e=o;if(e&&(i=r),"e"===t||"E"===t){r++;for(var s=!0,u=!1;r<this.expression.length;){if(t=this.expression.charAt(r),!s||"+"!==t&&"-"!==t){if(!(t>="0"&&t<="9"))break;u=!0,s=!1}else s=!1;r++}u||(r=i)}return e?(this.current=this.newToken("TNUMBER",parseFloat(this.expression.substring(n,r))),this.pos=r):this.pos=i,e},jt.prototype.isOperator=function(){var t=this.pos,e=this.expression.charAt(this.pos);if("+"===e||"-"===e||"*"===e||"/"===e||"%"===e||"^"===e||"?"===e||":"===e||"."===e)this.current=this.newToken(Lt,e);else if("∙"===e||"•"===e)this.current=this.newToken(Lt,"*");else if(">"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Lt,">="),this.pos++):this.current=this.newToken(Lt,">");else if("<"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Lt,"<="),this.pos++):this.current=this.newToken(Lt,"<");else if("|"===e){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(Lt,"||"),this.pos++}else if("="===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Lt,"=="),this.pos++):this.current=this.newToken(Lt,e);else{if("!"!==e)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Lt,"!="),this.pos++):this.current=this.newToken(Lt,e)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=t,!1)},jt.prototype.isOperatorEnabled=function(t){return this.parser.isOperatorEnabled(t)},jt.prototype.getCoordinates=function(){var t,e=0,r=-1;do{e++,t=this.pos-r,r=this.expression.indexOf("\n",r+1)}while(r>=0&&r<this.pos);return{line:e,column:t}},jt.prototype.parseError=function(t){var e=this.getCoordinates();throw new Error("parse error ["+e.line+":"+e.column+"]: "+t)};var Ht="IEXPR";function zt(t,e){this.type=t,this.value=null!=e?e:0}function Gt(t){return new zt("IOP1",t)}function Wt(t){return new zt("IOP2",t)}function Vt(t,e,r){this.parser=t,this.tokens=e,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==r.allowMemberAccess}zt.prototype.toString=function(){switch(this.type){case"INUMBER":case"IOP1":case"IOP2":case"IOP3":case"IVAR":case"IVARNAME":case"IENDSTATEMENT":return this.value;case"IFUNCALL":return"CALL "+this.value;case"IFUNDEF":return"DEF "+this.value;case"IARRAY":return"ARRAY "+this.value;case"IMEMBER":return"."+this.value;default:return"Invalid Instruction"}},Vt.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},Vt.prototype.tokenMatches=function(t,e){return void 0===e||(Array.isArray(e)?function(t,e){for(var r=0;r<t.length;r++)if(t[r]===e)return!0;return!1}(e,t.value):"function"==typeof e?e(t):t.value===e)},Vt.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},Vt.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},Vt.prototype.accept=function(t,e){return!(this.nextToken.type!==t||!this.tokenMatches(this.nextToken,e))&&(this.next(),!0)},Vt.prototype.expect=function(t,e){if(!this.accept(t,e)){var r=this.tokens.getCoordinates();throw new Error("parse error ["+r.line+":"+r.column+"]: Expected "+(e||t))}},Vt.prototype.parseAtom=function(t){var e=this.tokens.unaryOps;if(this.accept("TNAME")||this.accept(Lt,(function(t){return t.value in e})))t.push(new zt("IVAR",this.current.value));else if(this.accept("TNUMBER"))t.push(new zt("INUMBER",this.current.value));else if(this.accept("TSTRING"))t.push(new zt("INUMBER",this.current.value));else if(this.accept(Ft,"("))this.parseExpression(t),this.expect(Ft,")");else{if(!this.accept("TBRACKET","["))throw new Error("unexpected "+this.nextToken);if(this.accept("TBRACKET","]"))t.push(new zt("IARRAY",0));else{var r=this.parseArrayList(t);t.push(new zt("IARRAY",r))}}},Vt.prototype.parseExpression=function(t){var e=[];this.parseUntilEndStatement(t,e)||(this.parseVariableAssignmentExpression(e),this.parseUntilEndStatement(t,e)||this.pushExpression(t,e))},Vt.prototype.pushExpression=function(t,e){for(var r=0,n=e.length;r<n;r++)t.push(e[r])},Vt.prototype.parseUntilEndStatement=function(t,e){return!!this.accept("TSEMICOLON")&&(!this.nextToken||"TEOF"===this.nextToken.type||this.nextToken.type===Ft&&")"===this.nextToken.value||e.push(new zt("IENDSTATEMENT")),"TEOF"!==this.nextToken.type&&this.parseExpression(e),t.push(new zt(Ht,e)),!0)},Vt.prototype.parseArrayList=function(t){for(var e=0;!this.accept("TBRACKET","]");)for(this.parseExpression(t),++e;this.accept("TCOMMA");)this.parseExpression(t),++e;return e},Vt.prototype.parseVariableAssignmentExpression=function(t){for(this.parseConditionalExpression(t);this.accept(Lt,"=");){var e=t.pop(),r=[],n=t.length-1;if("IFUNCALL"!==e.type){if("IVAR"!==e.type&&"IMEMBER"!==e.type)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(r),t.push(new zt("IVARNAME",e.value)),t.push(new zt(Ht,r)),t.push(Wt("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var i=0,a=e.value+1;i<a;i++){var o=n-i;"IVAR"===t[o].type&&(t[o]=new zt("IVARNAME",t[o].value))}this.parseVariableAssignmentExpression(r),t.push(new zt(Ht,r)),t.push(new zt("IFUNDEF",e.value))}}},Vt.prototype.parseConditionalExpression=function(t){for(this.parseOrExpression(t);this.accept(Lt,"?");){var e=[],r=[];this.parseConditionalExpression(e),this.expect(Lt,":"),this.parseConditionalExpression(r),t.push(new zt(Ht,e)),t.push(new zt(Ht,r)),t.push(new zt("IOP3","?"))}},Vt.prototype.parseOrExpression=function(t){for(this.parseAndExpression(t);this.accept(Lt,"or");){var e=[];this.parseAndExpression(e),t.push(new zt(Ht,e)),t.push(Wt("or"))}},Vt.prototype.parseAndExpression=function(t){for(this.parseComparison(t);this.accept(Lt,"and");){var e=[];this.parseComparison(e),t.push(new zt(Ht,e)),t.push(Wt("and"))}};var Bt=["==","!=","<","<=",">=",">","in"];Vt.prototype.parseComparison=function(t){for(this.parseAddSub(t);this.accept(Lt,Bt);){var e=this.current;this.parseAddSub(t),t.push(Wt(e.value))}};var $t=["+","-","||"];Vt.prototype.parseAddSub=function(t){for(this.parseTerm(t);this.accept(Lt,$t);){var e=this.current;this.parseTerm(t),t.push(Wt(e.value))}};var qt=["*","/","%"];function Xt(t,e){return Number(t)+Number(e)}function Kt(t,e){return t-e}function Qt(t,e){return t*e}function Jt(t,e){return t/e}function Zt(t,e){return t%e}function te(t,e){return t===e}function ee(t,e){return t!==e}function re(t,e){return t>e}function ne(t,e){return t<e}function ie(t,e){return t>=e}function ae(t,e){return t<=e}function oe(t,e){return Boolean(t&&e)}function se(t,e){return Boolean(t||e)}function ue(t){return Math.log(t)*Math.LOG10E}function ce(t){return-t}function pe(t){return!t}function he(t){return t<0?Math.ceil(t):Math.floor(t)}function fe(t){return Math.random()*(t||1)}function le(t){return Array.isArray(t)?t.length:String(t).length}function de(t,e,r){return t?e:r}function me(t,e){return void 0===e||0==+e?Math.round(t):(t=+t,e=-+e,isNaN(t)||"number"!=typeof e||e%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]-e:-e)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+e:e))))}function ve(t,e){return t[0|e]}function ge(t){return 1===arguments.length&&Array.isArray(t)?Math.max.apply(Math,t):Math.max.apply(Math,arguments)}function ye(t){return 1===arguments.length&&Array.isArray(t)?Math.min.apply(Math,t):Math.min.apply(Math,arguments)}function Me(t,e){if("function"!=typeof t)throw new Error("First argument to map is not a function");if(!Array.isArray(e))throw new Error("Second argument to map is not an array");return e.map((function(e,r){return t(e,r)}))}function Ye(t,e,r){if("function"!=typeof t)throw new Error("First argument to fold is not a function");if(!Array.isArray(r))throw new Error("Second argument to fold is not an array");return r.reduce((function(e,r,n){return t(e,r,n)}),e)}function we(t,e){if("function"!=typeof t)throw new Error("First argument to filter is not a function");if(!Array.isArray(e))throw new Error("Second argument to filter is not an array");return e.filter((function(e,r){return t(e,r)}))}function be(t){return(t>0)-(t<0)||+t}function Ee(t){return Math.log(1+t)}function Ae(t){return Math.log(t)/Math.LN2}function Oe(t){if(!Array.isArray(t))throw new Error("Sum argument is not an array");return t.reduce((function(t,e){return t+Number(e)}),0)}function xe(t,e,r){var n,i,a,o,s,u,c=[];if(_e(t))return De(t,r);for(var p=t.length,h=0;h<p;h++){var f=t[h],l=f.type;if("INUMBER"===l||"IVARNAME"===l)c.push(f.value);else if("IOP2"===l)i=c.pop(),n=c.pop(),"and"===f.value?c.push(!!n&&!!xe(i,e,r)):"or"===f.value?c.push(!!n||!!xe(i,e,r)):"="===f.value?(o=e.binaryOps[f.value],c.push(o(n,xe(i,e,r),r))):(o=e.binaryOps[f.value],c.push(o(De(n,r),De(i,r))));else if("IOP3"===l)a=c.pop(),i=c.pop(),n=c.pop(),"?"===f.value?c.push(xe(n?i:a,e,r)):(o=e.ternaryOps[f.value],c.push(o(De(n,r),De(i,r),De(a,r))));else if("IVAR"===l)if(f.value in e.functions)c.push(e.functions[f.value]);else if(f.value in e.unaryOps&&e.parser.isOperatorEnabled(f.value))c.push(e.unaryOps[f.value]);else{var d=r[f.value];if(void 0===d)throw new Error("undefined variable: "+f.value);c.push(d)}else if("IOP1"===l)n=c.pop(),o=e.unaryOps[f.value],c.push(o(De(n,r)));else if("IFUNCALL"===l){for(u=f.value,s=[];u-- >0;)s.unshift(De(c.pop(),r));if(!(o=c.pop()).apply||!o.call)throw new Error(o+" is not a function");c.push(o.apply(void 0,s))}else if("IFUNDEF"===l)c.push(function(){for(var t=c.pop(),n=[],i=f.value;i-- >0;)n.unshift(c.pop());var a=c.pop(),o=function(){for(var i=Object.assign({},r),a=0,o=n.length;a<o;a++)i[n[a]]=arguments[a];return xe(t,e,i)};return Object.defineProperty(o,"name",{value:a,writable:!1}),r[a]=o,o}());else if(l===Ht)c.push(Ne(f,e));else if("IEXPREVAL"===l)c.push(f);else if("IMEMBER"===l)n=c.pop(),c.push(n[f.value]);else if("IENDSTATEMENT"===l)c.pop();else{if("IARRAY"!==l)throw new Error("invalid Expression");for(u=f.value,s=[];u-- >0;)s.unshift(c.pop());c.push(s)}}if(c.length>1)throw new Error("invalid Expression (parity)");return 0===c[0]?0:De(c[0],r)}function Ne(t,e,r){return _e(t)?t:{type:"IEXPREVAL",value:function(r){return xe(t.value,e,r)}}}function _e(t){return t&&"IEXPREVAL"===t.type}function De(t,e){return _e(t)?t.value(e):t}function Te(t,e){this.tokens=t,this.parser=e,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.functions=e.functions}function Se(t){return t.trim()}function Ce(t){this.options=t||{},this.unaryOps={SIN:Math.sin,COS:Math.cos,TAN:Math.tan,ASIN:Math.asin,ACOS:Math.acos,ATAN:Math.atan,SQRT:Math.sqrt,LOG:Math.log,LOG2:Math.log2||Ae,LN:Math.log,LOG10:Math.log10||ue,LG:Math.log10||ue,LOG1P:Math.log1p||Ee,ABS:Math.abs,CEIL:Math.ceil,FLOOR:Math.floor,ISNULL:function(t){return null===t},TRUNC:Math.trunc||he,"-":ce,"+":Number,EXP:Math.exp,NOT:pe,LENGTH:le,"!":pe,SIGN:Math.sign||be,TEXT:function(t){return e(t)?t.toISOString():String(t)},NUMBER:Number},this.binaryOps={"+":Xt,"-":Kt,"*":Qt,"/":Jt,"%":Zt,"^":Math.pow,"==":te,"!=":ee,">":re,"<":ne,">=":ie,"<=":ae,and:oe,or:se,in:function(t,e){return Array.isArray(e)?e.includes(t):String(e).includes(t)},"[":ve},this.ternaryOps={"?":de};var e=function(t){return t instanceof Date&&!isNaN(t)},r=function(t){if(e(t))return t;try{var r=new Date(t);return e(r)?r:null}catch(t){return null}};function n(t){return(1===arguments.length&&Array.isArray(t)?t:Array.from(arguments)).slice(0).filter((function(t){return!isNaN(t)&&Number.isFinite(t)}))}var i=/\w*/g,a=/\w\S*/g,o=/[\\^$*+?.()|[\]{}]/g;try{i=new RegExp("\\p{L}*","ug"),a=new RegExp("[\\p{L}\\p{N}]\\S*","ug")}catch(t){}this.functions={IF:de,RANDOM:fe,MIN:function(){var t=n.apply(this,arguments);return ye(t)},MAX:function(){return ge(n.apply(this,arguments))},SUM:function(){return Oe(n.apply(this,arguments))},MEAN:function(){var t=n.apply(this,arguments);return Oe(t)/t.length},MEDIAN:function(){var t=n.apply(this,arguments).sort((function(t,e){return t-e})),e=Math.floor(t.length/2);return t.length%2==1?t[e]:.5*(t[e-1]+t[e])},POW:Math.pow,ATAN2:Math.atan2,ROUND:me,CONCAT:function(){return Array.from(arguments).join("")},TRIM:Se,SUBSTR:function(t,e,r){return t.substr(e,r)},REPLACE:function(t,e,r){return t.replace(new RegExp(String(e).replace(o,"\\$&"),"g"),r)},REPLACE_REGEX:function(t,e,r){return t.replace(new RegExp(e,"g"),r)},SPLIT:function(t,e){return String(t).split(e)},LOWER:function(t){return String(t).toLowerCase()},UPPER:function(t){return String(t).toUpperCase()},PROPER:function(t){return String(t).replace(i,(function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}))},TITLE:function(t){return String(t).replace(a,(function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}))},SORT:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Array.isArray(t))throw new Error("First argument to SORT is not an array");return t.slice(0).sort((function(t,n){return((t="string"==typeof r?t[r]:"function"==typeof r?r(t):t)>(n="string"==typeof r?n[r]:"function"==typeof r?r(n):n)?1:t<n?-1:0)*(e?1:-1)}))},SLICE:function(t,e,r){if(!Array.isArray(t))throw new Error("First argument to SLICE is not an array");return t.slice(e,r)},JOIN:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Array.isArray(t))throw new Error("First argument to JOIN is not an array");return r?[t.slice(0,t.length-1).join(e),t[t.length-1]].join(r):t.join(e)},MAP:Me,FOLD:Ye,FILTER:we,PLUCK:function(t,e){if(!Array.isArray(t))throw new Error("First argument to PLUCK is not an array");return t.map((function(t){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:null}))},INDEXOF:function(t,e){return Array.isArray(t)||(t=String(t)),t.indexOf(e)},FIND:function(t,e){if(!Array.isArray(t))throw new Error("First argument to FIND is not an array");if("function"!=typeof e)throw new Error("Second argument to FIND is not a function");for(var r=t.length,n=0;n<r;n++)if(e(t[n]))return t[n];return null},RANGE:function(t,e,r){null==e&&(e=t||0,t=0),r||(r=e<t?-1:1);for(var n=Math.max(Math.ceil((e-t)/r),0),i=Array(n),a=0;a<n;a++,t+=r)i[a]=t;return i},EVERY:function(t,e){if(!Array.isArray(t))throw new Error("First argument to EVERY is not an array");if("function"!=typeof e)throw new Error("Second argument to EVERY is not a function");for(var r=t.length,n=!0,i=0;i<r;i++)if(!(n=n&&e(t[i])))return!1;return!0},SOME:function(t,e){if(!Array.isArray(t))throw new Error("First argument to SOME is not an array");if("function"!=typeof e)throw new Error("Second argument to SOME is not a function");for(var r=t.length,n=!1,i=0;i<r;i++)if(n=n||e(t[i]))return!0;return!1},DATE:function(){return arguments.length>1&&(arguments[1]=arguments[1]-1),C(Date,Array.prototype.slice.call(arguments))},YEAR:function(t){return(t=r(t))?t.getFullYear():null},MONTH:function(t){return(t=r(t))?t.getMonth()+1:null},DAY:function(t){return(t=r(t))?t.getDate():null},WEEKDAY:function(t){return(t=r(t))?t.getDay():null},HOURS:function(t){return(t=r(t))?t.getHours():null},MINUTES:function(t){return(t=r(t))?t.getMinutes():null},SECONDS:function(t){return(t=r(t))?t.getSeconds():null},DATEDIFF:function(t,e){return t=r(t),e=r(e),t&&e?(e.getTime()-t.getTime())/864e5:null},TIMEDIFF:function(t,e){return t=r(t),e=r(e),t&&e?(e.getTime()-t.getTime())/1e3:null}},this.unaryOps.LOWER=this.functions.LOWER,this.unaryOps.UPPER=this.functions.UPPER,this.unaryOps.PROPER=this.functions.PROPER,this.unaryOps.TITLE=this.functions.TITLE,this.unaryOps.TRIM=this.functions.TRIM,this.unaryOps.YEAR=this.functions.YEAR,this.unaryOps.MONTH=this.functions.MONTH,this.unaryOps.DAY=this.functions.DAY,this.unaryOps.WEEKDAY=this.functions.WEEKDAY,this.unaryOps.HOURS=this.functions.HOURS,this.unaryOps.MINUTES=this.functions.MINUTES,this.unaryOps.SECONDS=this.functions.SECONDS,this.consts={E:Math.E,PI:Math.PI,TRUE:!0,FALSE:!1,NA:Number.NaN,NULL:Number.NaN}}Vt.prototype.parseTerm=function(t){for(this.parseFactor(t);this.accept(Lt,qt);){var e=this.current;this.parseFactor(t),t.push(Wt(e.value))}},Vt.prototype.parseFactor=function(t){var e=this.tokens.unaryOps;if(this.save(),this.accept(Lt,(function(t){return t.value in e}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===Ft&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(t);if("TSEMICOLON"===this.nextToken.type||"TCOMMA"===this.nextToken.type||"TEOF"===this.nextToken.type||this.nextToken.type===Ft&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(t)}var r=this.current;this.parseFactor(t),t.push(Gt(r.value))}else this.parseExponential(t)},Vt.prototype.parseExponential=function(t){for(this.parsePostfixExpression(t);this.accept(Lt,"^");)this.parseFactor(t),t.push(Wt("^"))},Vt.prototype.parsePostfixExpression=function(t){for(this.parseFunctionCall(t);this.accept(Lt,"!");)t.push(Gt("!"))},Vt.prototype.parseFunctionCall=function(t){var e=this.tokens.unaryOps;if(this.accept(Lt,(function(t){return t.value in e}))){var r=this.current;this.parseAtom(t),t.push(Gt(r.value))}else for(this.parseMemberExpression(t);this.accept(Ft,"(");)if(this.accept(Ft,")"))t.push(new zt("IFUNCALL",0));else{var n=this.parseArgumentList(t);t.push(new zt("IFUNCALL",n))}},Vt.prototype.parseArgumentList=function(t){for(var e=0;!this.accept(Ft,")");)for(this.parseExpression(t),++e;this.accept("TCOMMA");)this.parseExpression(t),++e;return e},Vt.prototype.parseMemberExpression=function(t){for(this.parseAtom(t);this.accept(Lt,".")||this.accept("TBRACKET","[");){var e=this.current;if("."===e.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect("TNAME"),t.push(new zt("IMEMBER",this.current.value))}else{if("["!==e.value)throw new Error("unexpected symbol: "+e.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(t),this.expect("TBRACKET","]"),t.push(Wt("["))}}},Te.prototype.evaluate=function(t){return t=t||{},xe(this.tokens,this,t)},Te.prototype.variables=function(){return(this.tokens||[]).filter((function(t){return"IVAR"===t.type})).map((function(t){return t.value}))},Ce.prototype.parse=function(t){var e=[],r=new Vt(this,new jt(this,t),{allowMemberAccess:!0});return r.parseExpression(e),r.expect("TEOF","EOF"),new Te(e,this)},Ce.prototype.evaluate=function(t,e){return this.parse(t).evaluate(e)};var Re=new Ce;Ce.parse=function(t){return Re.parse(t)},Ce.evaluate=function(t,e){return Re.parse(t).evaluate(e)},Ce.keywords=["ABS","ACOS","ACOSH","and","ASIN","ASINH","ATAN","ATAN2","ATANH","CBRT","CEIL","CONCAT","COS","COSH","DATEDIFF","DAY","E","EVERY","EXP","EXPM1","FIND","FLOOR","HOURS","IF","in","INDEXOF","ISNULL","JOIN","LENGTH","LN","LOG","LOG10","LOG1P","LOG2","LOWER","MAP","MAX","MEAN","MEDIAN","MIN","MINUTES","MONTH","NOT","NOT","or","PI","PLUCK","POW","PROPER","RANDOM","RANGE","REPLACE","REPLACE_REGEX","ROUND","SECONDS","SIGN","SIN","SINH","SLICE","SOME","SORT","SPLIT","SQRT","SUBSTR","SUM","TAN","TANH","TIMEDIFF","TITLE","TRIM","TRUNC","UPPER","WEEKDAY","YEAR"];var Ie={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",AND:"logical",OR:"logical",NOT:"logical",IN:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};Ce.prototype.isOperatorEnabled=function(t){var e=function(t){return Object.prototype.hasOwnProperty.call(Ie,t)?Ie[t]:t}(t),r=this.options.operators||{};return!(e in r)||!!r[e]};var ke=/\{\{(.+?)\}\}/g;function Le(e){return t.isFunction(e.name)?e.name():t.isString(e.name)?e.name:e}function Fe(t){var e="string"==typeof t?document.querySelector(t):t;e&&e.parentElement.removeChild(e)}var Pe,je=Object.freeze({__proto__:null,purifyHtml:b,significantDimension:Ct,tailLength:j,round:U,smartRound:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,n=Ct(t,r);return n+=e,t.map((function(t){return U(t,n)}))},equalish:r,clone:Rt,getNonChartHeight:kt,outerHeight:It,dateFormat:function(t){var e=!0,r=!1;function n(t){return function(e){var r=Globalize.format(e,t);return"htt"!==t?r:r.toLowerCase()}}var i,a,o={date:"de"===(i=Globalize.culture().language)?"dd.":"dd",hour:"en"!==i?"H:00":"htt",minute:"de"===i?"H:mm":"h:mm",mm:"de"===i?"d.M.":"MM/dd",mmm:"de"===i?"d.MMM":"MMM dd",mmmm:"de"===i?"d. MMMM":"MMMM dd"};return a=[[n("yyyy"),function(){return!0}],[n("MMM"),function(t){return 0!==t.getMonth()}],[n(o.date),function(t){return 1!==t.getDate()}],[n(t<7?o.mm:o.mmm),function(t){return 1!==t.getDate()&&e}],[n(o.hour),function(t){return t.getHours()}],[n(o.minute),function(t){return t.getMinutes()}],[n(":ss"),function(t){return t.getSeconds()}],[n(".fff"),function(t){return t.getMilliseconds()}]],function(t){e=!r||t.getMonth()!==r.getMonth(),r=t;for(var n=a.length-1,i=a[n];!i[1](t);)i=a[--n];return i[0](t)}},htmlTemplate:function(t){var e={},r=new Ce;return t.replace(ke,(function(t,n){(n=n.trim())&&!e[n]&&(e[n]=r.parse(n))})),function(r){return b(t.replace(ke,(function(t,n){var i=n.trim()?e[n.trim()].evaluate(r):"";return null===i?"":i})),"<a><abbr><address><b><big><blockquote><br/><br><caption><cite><code><col><colgroup><dd><del><details><dfn><div><dl><dt><em><figure><font><h1><h2><h3><h4><h5><h6><hr><hgroup><i><img><ins><kbd><li><mark><meter><ol><p><pre><q><s><small><span><strike><strong><sub><summary><sup><table><tbody><td><th><thead><tfoot><tr><tt><u><ul><wbr>")}},minMax:function(t){var e=[Number.MAX_VALUE,-Number.MAX_VALUE];return t.forEach((function(t){e[0]=Math.min(e[0],t.range()[0]),e[1]=Math.max(e[1],t.range()[1])})),e},longDateFormat:function(t){return function(e){if("date"!==t.type())return e;switch(t.type(!0).precision()){case"year":return e.getFullYear();case"quarter":return e.getFullYear()+" Q"+(e.getMonth()/3+1);case"month":return Globalize.format(e,"MMM yy");case"day":return Globalize.format(e,"MMM d");case"minute":return Globalize.format(e,"t");case"second":return Globalize.format(e,"T")}}},columnNameColumn:function(t){return E("",t.map((function(t){return t.title()})))},name:Le,getMaxChartHeight:function(){if(0===window.innerHeight)return 0;var t=window.innerHeight-8;return t-=kt(),Math.max(t,0)},nearest:function(t,e){var r,n=Number.MAX_VALUE;return t.forEach((function(t){var i=Math.abs(t-e);i<n&&(n=i,r=t)})),r},metricSuffix:function(t){switch(t.substr(0,2).toLowerCase()){case"de":return{3:" Tsd.",6:" Mio.",9:" Mrd.",12:" Bio."};case"fr":return{3:" mil",6:" Mio",9:" Mrd"};case"es":return{3:" Mil",6:" millón"};default:return{3:"k",6:"M",9:" bil"}}},magnitudeRange:function(t){return Math.round(Math.log(t[1])/Math.LN10)-Math.round(Math.log(t[0])/Math.LN10)},logTicks:function(e,r){var n=Math.round(Math.log(e)/Math.LN10),i=Math.round(Math.log(r)/Math.LN10);return t.range(n,i).map((function(t){return Math.pow(10,t)}))},height:function(t){var e=parseFloat(getComputedStyle(t,null).height.replace("px",""));return isNaN(e)?0:e},width:function(t){var e=parseFloat(getComputedStyle(t,null).width.replace("px",""));return isNaN(e)?0:e},addClass:function(t,e){t&&t.classList.add(e)},removeClass:function(t,e){t&&t.classList.remove(e)},remove:Fe,domReady:function(t){/complete|interactive|loaded/.test(document.readyState)?t():window.addEventListener("DOMContentLoaded",(function(e){t()}))}});function Ue(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return t;for(var n=e.split("."),i=t,a=0;a<n.length&&null!=i;a++)i=i[n[a]];return null==i?r:i}function He(t){return t.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w-]+/g,"").replace(/-/g,"_").replace(/__+/g,"_").replace(/^_+/,"").replace(/_+$/,"").replace(/^(\d)/,"_$1").replace(/^(and|or|in|true|false)$/,"$1_")}function ze(){var t=[];return{fire:function(){for(var e=t.length-1;e>=0;e--)t[e].apply(this,arguments)},add:function(e){t.push(e)}}}function Ge(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(r,n){var i=document.createElement("script");i.src=t,i.onload=function(){e&&e(),r()},i.onerror=n,document.body.appendChild(i)}))}function We(t,e){var r=t.getMetadata("data.column-order",[]);return r.length&&r.length===e.numColumns()&&e.columnOrder(r),e}function Ve(e,r){var n=e.getMetadata("data.changes",[]),i=e.getMetadata("data.transpose",!1);n.forEach((function(t){var e="row",n="column";if(i&&(e="column",n="row"),r.hasColumn(t[n]))if(t.ignored=!1,0===t[e]){if(t.previous&&"undefined"!==t.previous)if(r.column(t[n]).title()!==t.previous)return;r.column(t[n]).title(t.value)}else{if(t.previous&&"undefined"!==t.previous)if(r.column(t[n]).raw(t[e]-1)!==t.previous)return;r.column(t[n]).raw(t[e]-1,t.value)}}));var a=e.getMetadata("data.column-format",{});return t.each(a,(function(t,e){t.type&&r.hasColumn(e)&&"auto"!==t.type&&r.column(e).type(t.type),t["input-format"]&&r.hasColumn(e)&&r.column(e).type(!0).format(t["input-format"])})),r}function Be(e,r){var n=Ue(e.get(),"metadata.describe.computed-columns",{});Array.isArray(n)||(n=Object.keys(n).reduce((function(t,e){return t.push({name:e,formula:n[e]}),t}),[]));var i=Ve(e,r).list(),a={},o={},s=new Ce;r.eachColumn((function(t){if(!t.isComputed)if(a[t.name()]=He(t.name()),"number"===t.type()){var e=R(t.range(),2),r=e[0],n=e[1];o[t.name()]={min:r,max:n,sum:t.sum(),mean:t.mean(),median:t.median()}}else if("date"===t.type()){var i=R(t.range(),2),s=i[0],u=i[1];o[t.name()]={min:s,max:u}}}));var u=n.reduce((function(t,e,n){var i=He(e.name);return t.set(i,{name:e.name,index:r.numColumns()+n,key:i,formula:e.formula,visited:0,computed:!1,dependsOn:[]})}),new Map);n.forEach((function(t){var e=t.formula,r=t.name,n=u.get(He(r));if(e.trim())try{n.expr=s.parse(e.trim()),n.expr.variables().forEach((function(t){t=t.split("__")[0],u.has(t)&&n.dependsOn.push(u.get(t))}))}catch(t){n.error=t.message}else n.expr={evaluate:function(){return""},variables:function(){return[]}}}));for(var c=[],p=0;u.size&&!(p>1e3);)u.forEach((function(t){p++;try{h(t,[])}catch(e){if(!e.message.startsWith("circular-dependency"))throw e;t.error=e.message,u.delete(t.key),c.push(t)}}));return c.forEach((function(r){if(r.error){var n=E(r.name,i.map((function(t){return"null"})));n.isComputed=!0,n.formula=r.formula,n.errors=[{message:r.error,row:"all"}],r.column=n}else r.column=function(r){var n=r.formula,s=r.name,u=r.expr,c=r.error,p=r.index,h=[];c&&h.push({row:"all",message:c});var f=Ue(e,"metadata.data.changes",[]).filter((function(t){return t.column===p&&t.row>0})).reduce((function(t,e){var r=t.get(e.row-1);return r&&(e.previous=r.previous),t.set(e.row-1,e),t}),new Map),l=i.map((function(e,r){var n,i={ROWNUMBER:r};t.each(e,(function(t,e){a[e]&&(i[a[e]]=t,o[e]&&Object.keys(o[e]).forEach((function(t){i["".concat(a[e],"__").concat(t)]=o[e][t]})))}));try{"function"==typeof(n=u.evaluate(i))&&(h.push({message:"formula returned function",row:r}),n=null)}catch(t){h.push({message:t.message,row:r}),n=null}if(f.has(r)){var s=f.get(r);if(void 0===s.previous||s.previous==n)return s.value}return n}));a[s]=He(s),l.forEach((function(t,e){i[e][s]=t}));var d=E(s,l.map((function(e){return t.isBoolean(e)?e?"yes":"no":t.isDate(e)?e.toISOString():t.isNumber(e)?String(e):t.isNull(e)?null:String(e)})));if("number"===d.type()){var m=R(d.range(),2),v=m[0],g=m[1];o[s]={min:v,max:g,sum:d.sum(),mean:d.mean(),median:d.median()}}else if("date"===d.type()){var y=R(d.range(),2),M=y[0],Y=y[1];o[s]={min:M,max:Y}}return d.isComputed=!0,d.errors=h,d.formula=n,d}(r)})),c.sort((function(t,e){return t.index-e.index})).forEach((function(t){var e=t.column;return r.add(e)})),r;function h(t,e){if(!t.computed){e.push(t.name);for(var r=0;r<e.length-2;r++)if(t.name===e[r])throw new Error("circular-dependency: "+e.join(" ‣ "));t.curIter=p;for(var n=!0,i=0;i<t.dependsOn.length;i++)n=n&&t.dependsOn[i].computed;n?(t.computed=!0,c.push(t),u.delete(t.key)):e.length<10&&t.dependsOn.forEach((function(t){h(t,e.slice(0))}))}}}var $e=function(){}.prototype;t.extend($e,{__init:function(){var t=this;return this.__renderedDfd=new Promise((function(e,r){t.__renderedResolve=e})),this.__rendered=!1,this.__colors={},this.__callbacks={},window.parent&&window.parent.postMessage&&window.parent.postMessage("datawrapper:vis:init","*"),this},render:function(t){t.innerHTML="implement me!"},theme:function(e){if(!arguments.length)return"string"==typeof this.__theme?dw.theme(this.__theme):this.__theme;this.__theme=e;var r=["horizontalGrid","verticalGrid","yAxis","xAxis"];return t.each(r,(function(t){if(Object.prototype.hasOwnProperty.call(e,t))for(var r in e[t]){var n=r.replace(/([A-Z])/g,"-$1").toLowerCase();Object.prototype.hasOwnProperty.call(e[t],n)||(e[t][n]=e[t][r])}})),this},size:function(t,e){var r=this;return arguments.length?(r.__w=t,r.__h=e,r):[r.__w,r.__h]},get:function(t,e){return Ue(this.chart().get(),"metadata.visualize"+(t?"."+t:""),e)},notify:function(e){if(dw.backend&&t.isFunction(dw.backend.notify))return dw.backend.notify(e);window.parent&&window.parent.postMessage?window.parent.postMessage("notify:"+e,"*"):window.console&&console.log(e)},signature:function(){},translate:function(t){return this.meta.locale[t]||t},checkBrowserCompatibility:function(){return!0},chart:function(e){var r=this;if(!arguments.length)return r.__chart;r.dataset=e.dataset(),r.theme(e.theme()),r.__chart=e;var n=Ue(e.get(),"metadata.data.column-format",{}),i={};return t.each(n,(function(t,e){i[e]=!!t.ignore})),r.dataset.filterColumns&&r.dataset.filterColumns(i),r},axes:function(e,r){var n=this,i=Ue(n.chart().get(),"metadata.axes",{});if(!r&&n.__axisCache&&t.isEqual(n.__axisCache.userAxes,i))return n.__axisCache[e?"axesAsColumns":"axes"];var a=n.dataset,o={},s={},u={},c=[];t.each(n.meta.axes,(function(e,r){if(i[r]){var n=i[r];(function(e){t.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++)if(!a.hasColumn(e[r]))return!1;return!0})(n)&&h(e,n,!0)&&!!e.multiple===t.isArray(n)&&(s[r]=e.multiple&&!t.isArray(n)?[n]:n,t.isArray(n)||(n=[n]),t.each(n,(function(t){o[t]=!0})))}}));var p=[];function h(e,r,n){t.isArray(r)||(r=[r]),r=r.map((function(t){return"string"==typeof t?a.column(t):t}));for(var i=0;i<r.length;i++)if(!n&&o[r[i].name()]||-1===t.indexOf(e.accepts,r[i].type()))return!1;return!0}return t.each(n.meta.axes,(function(e,r){var i,u;if(p.push(r),!s[r])if(e.optional&&e.overrideOptionalKey&&Ue(n.chart().get(),"metadata."+e.overrideOptionalKey,!1)&&(e.optional=!1),e.optional)s[r]=!1;else if(e.multiple){var c=(i=e.accepts,u=0,t.each(n.meta.axes,(function(t,e){p.indexOf(e)>-1||function(t,e){if(void 0===t&&void 0!==e)return!1;if(void 0===e&&void 0!==t)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(-1===e.indexOf(t[r]))return!1;return!0}(t.accepts,i)&&"string"!=typeof u&&(t.optional||(t.multiple?u="multiple":u+=1))})),u),f=function(t,r){var n=0;return t.eachColumn((function(t,r){h(e,t)&&n++})),n}(a);s[r]=[],a.eachColumn((function(t){"multiple"===c&&s[r].length||f<=c||h(e,t)&&(o[t.name()]=!0,s[r].push(t.name()),f--)}))}else{var l,d=t.filter(a.columns(),(function(t){return h(e,t)}));if(e.preferred){var m=new RegExp(e.preferred,"i");l=t.find(d,(function(t){return m.test(t.name())||t.title()!==t.name()&&m.test(t.title())}))}if(l||(l=d[0]),l)o[l.name()]=!0,s[r]=l.name();else if(t.indexOf(e.accepts,"text")>=0){var v=t.filter(a.columns(),(function(r){return t.indexOf(e.accepts,r.type())>=0}));if(v.length)s[r]=v[0].name();else{var g=E(r,t.map(t.range(a.numRows()),(function(t){return(t>25?String.fromCharCode(64+t/26):"")+String.fromCharCode(65+t%26)})),"text");a.add(g),n.chart().dataset(a),o[g.name()]=!0,s[r]=g.name()}}}})),c.length&&n.notify(c.join("<br />")),t.each(s,(function(e,r){t.isArray(e)?(u[r]=[],t.each(e,(function(t,e){u[r][e]=!1!==t?n.dataset.column(t):null}))):u[r]=!1!==e?n.dataset.column(e):null})),n.__axisCache={axes:s,axesAsColumns:u,userAxes:Rt(i)},n.__axisCache[e?"axesAsColumns":"axes"]},keys:function(){var t=this.axes();if(t.labels){var e=this.dataset.column(t.labels),r=this.chart().columnFormatter(e),n=[];return e.each((function(t){n.push(String(r(t)))})),n}return[]},keyLabel:function(t){return t},reset:function(){this.clear();var t=document.querySelector("#chart");t.innerHTML="",t.outerHTML=t.outerHTML,Fe(".chart .filter-ui"),Fe(".chart .legend")},clear:function(){},renderingComplete:function(){window.parent&&window.parent.postMessage&&setTimeout((function(){window.parent.postMessage("datawrapper:vis:rendered","*")}),200),this.__renderedResolve(),this.__rendered=!0,this.postRendering()},postRendering:function(){},rendered:function(){return this.__renderedDfd},supportsSmartRendering:function(){return!1},_svgCanvas:function(){return!1},colorMap:function(){var t=this;return function(e){return t.__colors[e]=1,window.__dw&&window.__dwColorMap?window.__dwColorMap(e):e}},colorsUsed:function(){return Object.keys(this.__colors)},on:function(t,e){this.__callbacks[t]||(this.__callbacks[t]=[]),this.__callbacks[t].push(e)},fire:function(t,e){this.__callbacks[t]&&this.__callbacks[t].forEach((function(t){"function"==typeof t&&t(e)}))}});var qe={};function Xe(t){if(!qe[t]){console.warn("unknown visualization type: "+t);var e=Object.keys(qe);return e.length>0&&console.warn("try one of these instead: "+e.join(", ")),!1}return new qe[t]}Xe.register=function(e){var r=3===arguments.length?qe[arguments[1]].prototype:$e,n=arguments[arguments.length-1],i=qe[e]=function(){};t.extend(i.prototype,r,{id:e},n)},Xe.has=function(t){return void 0!==qe[t]},Xe.base=$e;var Ke={};function Qe(t){return Ke[t]}Qe.register=function(t,e){Ke[t]=e},E.types=y;var Je={version:"chart-core@8.23.6",dataset:e,column:E,datasource:{delimited:k,json:P},utils:je,chart:function(e){var r,n,i,a,o,s=ze(),u=ze(),c={get:function(t,r){return Ue(e,t,r)},getMetadata:function(t,r){return Ue(e,"metadata.".concat(t),r)},set:function(t,r){return function(t,e,r){var n=e.split("."),i=n.pop(),a=t;return n.forEach((function(t){void 0!==a[t]&&null!==a[t]||(a[t]={}),a=a[t]})),JSON.stringify(a[i])!==JSON.stringify(r)&&(a[i]=r,!0)}(e,t,r)&&s.fire(c,t,r),this},setMetadata:function(t,e){return c.set("metadata.".concat(t),e)},load:function(t,e){var r=this,n={firstRowIsHeader:c.get("metadata.data.horizontal-header",!0),transpose:c.get("metadata.data.transpose",!1)};return!t&&""!==t||e?n.url=e||"data.csv":n.csv=t,(c.get("metadata.data.json")?P(n):k(n)).dataset().then((function(t){return r.dataset(t),u.fire(c,t),t})).catch((function(t){console.error("could not fetch datasource",t)}))},dataset:function(t){return arguments.length?(!0!==t&&(o=t),r=c.get("metadata.data.json")?o:We(c,Ve(c,Be(c,o))),!0===t?r:c):r},theme:function(t){return arguments.length?(n=t,c):n||{}},vis:function(t){return arguments.length?((Pe=t).chart(c),c):Pe},hasHighlight:function(){var e=c.get("metadata.visualize.highlighted-series");return t.isArray(e)&&e.length>0},isHighlighted:function(e){if(void 0===t.isUndefined(e))return!1;var r=c.get("metadata.visualize.highlighted-series"),n=Le(e);return!t.isArray(r)||0===r.length||t.indexOf(r,n)>=0},locale:function(t,e){return arguments.length?((a=t.replace("_","-"))||(a="en-US"),window.Globalize&&(Object.hasOwnProperty.call(Globalize.cultures,a)?(Globalize.culture(a),"function"==typeof e&&e()):Ge("/static/vendor/globalize/cultures/globalize.culture."+a+".js",(function(){c.locale(a),"function"==typeof e&&e()}))),c):a},metricPrefix:function(t){return arguments.length?(i=t,c):i},formatValue:function(t,e,r){var n=c.get("metadata.describe.number-format"),i=Number(c.get("metadata.describe.number-divisor")),a=c.get("metadata.describe.number-append","").replace(" ","&nbsp;"),o=c.get("metadata.describe.number-prepend","").replace(" ","&nbsp;");return 0!==i&&(t=Number(t)/Math.pow(10,i)),"-"!==n?((r||t===Math.round(t))&&(n=n.substr(0,1)+"0"),t=Globalize.format(t,n)):0!==i&&(t=t.toFixed(1)),e?o+t+a:t},render:function(t){if(!Pe||!n||!r)throw new Error("cannot render the chart!");Pe.chart(c),Pe.__init(),t.parentElement.classList.add("vis-"+Pe.id),t.parentElement.classList.add("theme-"+n.id),t.get=function(){return t},Pe.render(t)},attributes:function(t){return arguments.length?(e=t,c):e},onChange:s.add,onDatasetChange:u.add,columnFormatter:function(e){var r=c.get("metadata.data.column-format",{});if(r=t.clone(r[e.name()]||{type:"auto","number-format":"auto"}),"number"===e.type()&&("auto"===r||void 0===r["number-format"]||"auto"===r["number-format"])){var n=Ct(e.values());r["number-format"]="n"+Math.max(0,n)}return e.type(!0).formatter(r)},dataCellChanged:function(t,e){var n=c.get("metadata.data.changes",[]),i=c.get("metadata.data.transpose",!1),a=!1,o=r.columnOrder();return t=o[t],n.forEach((function(r){var n="row",o="column";i&&(n="column",o="row"),t===r[o]&&r[n]===e&&(a=!0)})),a}};return c},visualization:Xe,theme:Qe};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=Je),exports.dw=Je):window.dw=Je}(_);
//# sourceMappingURL=dw-2.0.min.js.map
